import{_ as v,r as i,c as f,a as u,w as n,v as s,o as g}from"./index-CvfDpWTj.js";import{a as b}from"./axios-upsvKRUO.js";const x={class:"container pt-5 pb-5"},y={class:"form d-flex flex-column"},V={__name:"AddMusicView",setup(_){const e=i({name:"",artists:"",genre:"",album:"",img:null,music:null}),o=i(null),m=i(null),r=t=>e.value.img=t.target.files[0],p=t=>e.value.music=t.target.files[0],d=async()=>{if(!e.value.name||!e.value.artists||!e.value.genre||!e.value.album||!e.value.img||!e.value.music){alert("Данные не заполнены!");return}const t=new FormData;t.append("name",e.value.name),t.append("genre",e.value.genre),t.append("album",e.value.album),t.append("img",e.value.img),t.append("music",e.value.music);const a=e.value.artists.split(",");for(let l=0;l<a.length;l++)t.append("artists",a[l]);try{const l=await b.post("http://localhost:5031/api/music/add",t,{headers:{"Content-Type":"multipart/form-data"}});c(),alert("Данные успешно загружены!")}catch(l){alert("Провал о май гад --> ",l)}},c=()=>{e.value.name="",e.value.artists="",e.value.genre="",e.value.album="",e.value.img=null,e.value.music=null,o.value.value="",m.value.value=""};return(t,a)=>(g(),f("main",x,[u("div",y,[n(u("input",{class:"input mb-4",type:"text",name:"name",placeholder:"Название песни",autocomplete:"off",required:"","onUpdate:modelValue":a[0]||(a[0]=l=>e.value.name=l)},null,512),[[s,e.value.name]]),n(u("input",{class:"input mb-4",type:"text",name:"artists",placeholder:"Артисты",autocomplete:"off",required:"","onUpdate:modelValue":a[1]||(a[1]=l=>e.value.artists=l)},null,512),[[s,e.value.artists]]),n(u("input",{class:"input mb-4",type:"text",name:"genre",placeholder:"Жанр",autocomplete:"off",required:"","onUpdate:modelValue":a[2]||(a[2]=l=>e.value.genre=l)},null,512),[[s,e.value.genre]]),n(u("input",{class:"input mb-4",type:"text",name:"album",placeholder:"Название альбома",autocomplete:"off",required:"","onUpdate:modelValue":a[3]||(a[3]=l=>e.value.album=l)},null,512),[[s,e.value.album]]),a[4]||(a[4]=u("div",null,"Картинка",-1)),u("input",{class:"mb-4",type:"file",name:"img",required:"",onChange:r,ref_key:"img",ref:o},null,544),a[5]||(a[5]=u("div",null,"Музыка",-1)),u("input",{class:"mb-4",type:"file",name:"music",required:"",onChange:p,ref_key:"music",ref:m},null,544),u("button",{class:"btn",onClick:d},"Добавить")])]))}},k=v(V,[["__scopeId","data-v-c0c59dc4"]]);export{k as default};
